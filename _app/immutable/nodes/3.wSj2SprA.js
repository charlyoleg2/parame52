import{a as La,b as Ga}from"../chunks/BxU6B_J1.js";import{H as Ba,a as Ra,g as Ha}from"../chunks/DxVhB_3E.js";import"../chunks/DsnmJJEf.js";import{i as oa,aR as ha,J as Ge,a8 as Ja,aS as Ua,o as Qa,aT as $a,aU as es,W as ts,H as as,w as Ia,a9 as Xa,aV as ss,aW as ls,ah as y,g as r,aD as rs,ag as tt,aX as Fe,p as be,at as Zt,a as Le,b as C,c as pe,f as T,d as s,r as t,t as te,s as a,as as K,au as ye,e as w,aw as we,u as xa,aY as Yt,aZ as la,av as Sa,a_ as pa,a$ as Na,b0 as ns}from"../chunks/CziT1XCT.js";import{s as V,e as je,k as ya,l as se,m as ca,n as os,o as cs,q as is,t as vs,u as ka,P as ra,w as ja,x as na,y as $e,z as ds,A as us,B as fs,C as ms,D as ma,F as gs,G as Aa,r as _s,f as gt,a as ga,H as ne,I as bs,J as Ca,K as ps,L as ys,M as hs,N as xs}from"../chunks/B8Npla_b.js";import{p as Se,i as et,b as ia}from"../chunks/RgFtBYQ_.js";import{s as ks}from"../chunks/qGOfSBod.js";import{p as Oa}from"../chunks/DrBiYHxT.js";import{a as Ds,o as ws}from"../chunks/fCVZ51zT.js";import{i as zs}from"../chunks/C2Rxz0g2.js";function Wa(l){var e,o,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var v=l.length;for(e=0;e<v;e++)l[e]&&(o=Wa(l[e]))&&(n&&(n+=" "),n+=o)}else for(o in l)l[o]&&(n&&(n+=" "),n+=o);return n}function Ls(){for(var l,e,o=0,n="",v=arguments.length;o<v;o++)(l=arguments[o])&&(e=Wa(l))&&(n&&(n+=" "),n+=e);return n}function Pa(l){return typeof l=="object"?Ls(l):l??""}const Fa=[...` 	
\r\fÂ \v\uFEFF`];function Ss(l,e,o){var n=l==null?"":""+l;if(e&&(n=n?n+" "+e:e),o){for(var v in o)if(o[v])n=n?n+" "+v:v;else if(n.length)for(var c=v.length,d=0;(d=n.indexOf(v,d))>=0;){var i=d+c;(d===0||Fa.includes(n[d-1]))&&(i===n.length||Fa.includes(n[i]))?n=(d===0?"":n.substring(0,d))+n.substring(i+1):d=i}}return n===""?null:n}function he(l,e,o,n,v,c){var d=l.__className;if(oa||d!==o||d===void 0){var i=Ss(o,n,c);(!oa||i!==l.getAttribute("class"))&&(i==null?l.removeAttribute("class"):l.className=i),l.__className=o}else if(c&&v!==c)for(var u in c){var h=!!c[u];(v==null||h!==!!v[u])&&l.classList.toggle(u,h)}return c}function Ya(l,e,o=!1){if(l.multiple){if(e==null)return;if(!Qa(e))return $a();for(var n of l.options)n.selected=e.includes(Vt(n));return}for(n of l.options){var v=Vt(n);if(es(v,e)){n.selected=!0;return}}(!o||e!==void 0)&&(l.selectedIndex=-1)}function Ns(l){var e=new MutationObserver(()=>{Ya(l,l.__value)});e.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ts(()=>{e.disconnect()})}function Ma(l,e,o=e){var n=new WeakSet,v=!0;ha(l,"change",c=>{var d=c?"[selected]":":checked",i;if(l.multiple)i=[].map.call(l.querySelectorAll(d),Vt);else{var u=l.querySelector(d)??l.querySelector("option:not([disabled])");i=u&&Vt(u)}o(i),Ge!==null&&n.add(Ge)}),Ja(()=>{var c=e();if(l===document.activeElement){var d=Ua??Ge;if(n.has(d))return}if(Ya(l,c,v),v&&c===void 0){var i=l.querySelector(":checked");i!==null&&(c=Vt(i),o(c))}l.__value=c,v=!1}),Ns(l)}function Vt(l){return"__value"in l?l.__value:l.value}function _t(l,e,o=e){var n=new WeakSet;ha(l,"input",async v=>{var c=v?l.defaultValue:l.value;if(c=_a(l)?ba(c):c,o(c),Ge!==null&&n.add(Ge),await as(),c!==(c=e())){var d=l.selectionStart,i=l.selectionEnd,u=l.value.length;if(l.value=c??"",i!==null){var h=l.value.length;d===i&&i===u&&h>u?(l.selectionStart=h,l.selectionEnd=h):(l.selectionStart=d,l.selectionEnd=Math.min(i,h))}}}),(oa&&l.defaultValue!==l.value||Ia(e)==null&&l.value)&&(o(_a(l)?ba(l.value):l.value),Ge!==null&&n.add(Ge)),Xa(()=>{var v=e();if(l===document.activeElement){var c=Ua??Ge;if(n.has(c))return}_a(l)&&v===ba(l.value)||l.type==="date"&&!v&&!l.value||v!==l.value&&(l.value=v??"")})}function ze(l,e,o=e){ha(l,"change",n=>{var v=n?l.defaultChecked:l.checked;o(v)}),(oa&&l.defaultChecked!==l.checked||Ia(e)==null)&&o(l.checked),Xa(()=>{var n=e();l.checked=!!n})}function _a(l){var e=l.type;return e==="number"||e==="range"}function ba(l){return l===""?null:+l}function js(l,e){ss(window,["resize"],()=>ls(()=>e(window[l])))}function As(l){var e=rs(0);return function(){return arguments.length===1?(y(e,r(e)+1),arguments[0]):(r(e),l())}}function Cs(l,e){throw new Ba(l,e)}function Os({params:l}){const e=l.design;if(Object.keys(La).includes(e))return{pageDef:La[e],allLink:Ga};Cs(404,"Design undefined!")}const Wl=Object.freeze(Object.defineProperty({__proto__:null,load:Os},Symbol.toStringTag,{value:"Module"})),H=tt({});function Ea(l,e,o){if(Object.keys(H).includes(l)){const v=H[l],c=Object.keys(v);for(const d of Object.keys(e))c.includes(d)?o&&(v[d]=e[d]):v[d]=e[d];H[l]=v}else H[l]=e}function Ps(l){const e=l.pDef.partName,o={};for(const n of l.pDef.params)o[n.name]=n.init;Ea(e,o,!1)}var Fs=T('<aside class="backdrop svelte-1tj1fgx"><div class="dialog svelte-1tj1fgx"><button class="svelte-1tj1fgx"><img/></button></div></aside>');function Va(l,e){be(e,!0);let o=Se(e,"modalOpen",15);function n(){o(!1)}var v=Zt(),c=Le(v);{var d=i=>{var u=Fs(),h=s(u),m=s(h);m.__click=n;var L=s(m);t(m),t(h),t(u),te(()=>{V(L,"src",e.svgPath),V(L,"alt",e.svgPath)}),C(i,u)};et(c,i=>{o()&&i(d)})}C(l,v),pe()}Fe(["click"]);var Ms=T('<button class="svelte-1uv4io3"><img class="svelte-1uv4io3"/></button>'),Ts=T('<section class="svelte-1uv4io3"><!> <!></section>');function Rs(l,e){be(e,!0);function o(m){const L=[];for(const j of Object.values(m.paramSvg))L.includes(j)||L.push(j);return L}let n=K(!1),v=K(""),c=ye(()=>o(e.pDef).map(m=>ya(`/pgdsvg/${m}`)));function d(m){y(v,m,!0),y(n,!0)}var i=Ts(),u=s(i);Va(u,{get svgPath(){return r(v)},get modalOpen(){return r(n)},set modalOpen(m){y(n,m,!0)}});var h=a(u,2);je(h,16,()=>r(c),m=>m,(m,L)=>{var j=Ms();j.__click=()=>d(L);var x=s(j);t(j),te(()=>{V(x,"src",L),V(x,"alt",L)}),C(m,j)}),t(i),C(l,i),pe()}Fe(["click"]);var Us=T('<aside class="backdrop svelte-1tv6x6r"><div><article class="question svelte-1tv6x6r"><!></article> <footer class="svelte-1tv6x6r"><button class="cancel svelte-1tv6x6r">Cancel</button> <button class="ok svelte-1tv6x6r"> </button></footer></div></aside>');function Et(l,e){be(e,!0);let o=Se(e,"okName",3,"Ok"),n=Se(e,"modalOpen",15),v=Se(e,"sizeLarge",3,!1);function c(){n(!1)}function d(){e.okFunc(),n(!1)}var i=Zt(),u=Le(i);{var h=m=>{var L=Us(),j=s(L);let x;var f=s(j),I=s(f);ks(I,()=>e.children),t(f);var R=a(f,2),Z=s(R);Z.__click=c;var A=a(Z,2);A.__click=d;var Q=s(A,!0);t(A),t(R),t(j),t(L),te(()=>{x=he(j,1,"dialog svelte-1tv6x6r",null,x,{sizeLarge:v()}),w(Q,o())}),C(m,L)};et(u,m=>{n()&&m(h)})}C(l,i),pe()}Fe(["click"]);var Is=T('<p class="diagItem svelte-6kifot"> </p>'),Xs=T('<p class="diagTitle svelte-6kifot">Do you really want to delete the following localStorage keys?</p> <!>',1),Ws=T('<tr class="svelte-6kifot"><td><input type="checkbox"/></td><td class="svelte-6kifot"><button class="svelte-6kifot"> </button></td><td> </td></tr>'),Ys=T('<div class="deleteKeys svelte-6kifot"><button class="svelte-6kifot">Delete</button> <!> <table class="svelte-6kifot"><thead class="svelte-6kifot"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-6kifot"></tbody></table></div>');function Za(l,e){be(e,!0);let o=Se(e,"storeName",15),n=Se(e,"localKeys",15),v=K(tt({})),c=K(!1),d=K(!1);function i(){let g=[];const U=new RegExp(`^${e.pageName}_`);return g=Object.keys(window.localStorage).filter(E=>U.test(E)).map(E=>E.replace(U,"")),g.sort(),g}n(i());function u(g){o(g)}function h(g){let U={};for(const q of g){let E="";const $=`${e.pageName}_${q}`,J=window.localStorage.getItem($);J!==null&&(E=JSON.parse(J).lastModif),U[q]=E}return U}let m=ye(()=>h(n()));function L(g){let U={};for(const q of g)U[q]=!1;return U}y(v,L(n()),!0);function j(){for(const g of n())r(v)[g]=r(c)}function x(){for(const g of n())if(r(v)[g]){const U=`${e.pageName}_${g}`;window.localStorage.removeItem(U)}y(c,!1),n(i())}var f=Ys(),I=s(f);I.__click=()=>{y(d,!0)};var R=a(I,2);Et(R,{okName:"Confirm",okFunc:x,get modalOpen(){return r(d)},set modalOpen(g){y(d,g,!0)},children:(g,U)=>{var q=Xs(),E=a(Le(q),2);je(E,16,n,$=>$,($,J)=>{var ie=Zt(),ae=Le(ie);{var G=fe=>{var re=Is(),ve=s(re,!0);t(re),te(()=>w(ve,J)),C(fe,re)};et(ae,fe=>{r(v)[J]&&fe(G)})}C($,ie)}),C(g,q)},$$slots:{default:!0}});var Z=a(R,2),A=s(Z),Q=a(s(A)),le=s(Q),oe=s(le);se(oe),oe.__change=j,t(le),we(2),t(Q),t(A);var ce=a(A);je(ce,20,n,g=>g,(g,U)=>{var q=Ws(),E=s(q),$=s(E);se($),t(E);var J=a(E),ie=s(J);ie.__click=()=>u(U);var ae=s(ie,!0);t(ie),t(J);var G=a(J),fe=s(G,!0);t(G),t(q),te(()=>{w(ae,U),w(fe,r(m)[U])}),ze($,()=>r(v)[U],re=>r(v)[U]=re),C(g,q)}),t(ce),t(Z),t(f),ze(oe,()=>r(c),g=>y(c,g)),C(l,f),pe()}Fe(["click","change"]);var Es=T('<p class="warnMsg svelte-1cqep28"> </p>'),Vs=T('<!> <div class="svelte-1cqep28"><label for="storName" class="svelte-1cqep28">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1cqep28"/> <!></div>',1);function Zs(l,e){be(e,!0);let o=Se(e,"storeName",15),n=K(tt([]));function v(j){const x=/[-:]/g,f=/\..*$/,I=new Date().toISOString().replace(x,"").replace(f,"").replace("T","_");return`${j}_${I}`}o(v(e.pageName));let c=ye(()=>r(n).includes(o()));var d=Vs(),i=Le(d);Za(i,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(j){o(j)},get localKeys(){return r(n)},set localKeys(j){y(n,j,!0)}});var u=a(i,2),h=a(s(u),2);se(h);var m=a(h,2);{var L=j=>{var x=Es(),f=s(x);t(x),te(()=>w(f,`Warning: name ${o()??""} already used`)),C(j,x)};et(m,j=>{r(c)&&j(L)})}t(u),_t(h,o),C(l,d),pe()}var qs=T('<!> <div class="svelte-1ezvsu5"><label for="storName" class="svelte-1ezvsu5">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-1ezvsu5"/></div>',1);function Ks(l,e){be(e,!0);let o=Se(e,"storeName",15),n=K(tt([]));function v(h){let m=o();return!h.includes(m)&&(h.length>0?m=h[0]:m=""),m}xa(()=>{o(v(r(n)))});var c=qs(),d=Le(c);Za(d,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(h){o(h)},get localKeys(){return r(n)},set localKeys(h){y(n,h,!0)}});var i=a(d,2),u=a(s(i),2);se(u),t(i),te(()=>ca(u,o())),C(l,c),pe()}const D=tt({dLayers:cs(),zAdjust:os(),canvasZWidth:0});var Gs=T('<canvas class="mini svelte-vrsl8h"></canvas>');function Ta(l,e){be(e,!0);const o=200,n=.6;let v;function c(u,h,m,L){const j=is(L);j.ruler=!1;let x;if(v){const f=v.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const I=f.canvas.width;try{e.full?x=u.getAdjustFull(f.canvas.width,f.canvas.height):x=vs(m,I,h),u.draw(f,x,j)}catch(R){console.log(R)}}}xa(()=>{c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)});function d(u){const h=u.offsetX,m=u.offsetY,L=v.getContext("2d"),j=L.canvas.width/2,x=L.canvas.height/2;if(u.button===0){let f=1;h>j&&(f+=1*n),m>x&&(f+=2*n),L.canvas.width=f*o,L.canvas.height=f*o,c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)}}var i=Gs();V(i,"width",o),V(i,"height",o),i.__click=d,ia(i,u=>v=u,()=>v),C(l,i),pe()}Fe(["click"]);function Bs(l,e){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",l),o.click(),o.remove()}function Hs(l,e,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_");return ka(c,l,e,o)}function Da(l,e,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_"),d=`px_${l}_${c}.json`,i=ka(c,l,e,o);Bs(d,i)}function Js(l,e,o){const n=new URL(l),v=2e3;let c=n.toString().length;for(const d of Object.keys(e)){const i=e[d].toString(),u=2+d.length+i.length;n.searchParams.append(encodeURIComponent(d),encodeURIComponent(i)),c+=u}return c>=v&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${v}`),n.toString()}const Qs=Symbol();class $s extends URLSearchParams{#e=K(0);#s=tl();#t=!1;#a(){if(!this.#s||this.#t)return;this.#t=!0;const e=this.toString();this.#s.search=e&&`?${e}`,this.#t=!1}[Qs](e){if(!this.#t){this.#t=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of e)super.append(o,n);Yt(this.#e),this.#t=!1}}append(e,o){super.append(e,o),this.#a(),Yt(this.#e)}delete(e,o){var n=super.has(e,o);super.delete(e,o),n&&(this.#a(),Yt(this.#e))}get(e){return r(this.#e),super.get(e)}getAll(e){return r(this.#e),super.getAll(e)}has(e,o){return r(this.#e),super.has(e,o)}keys(){return r(this.#e),super.keys()}set(e,o){var n=super.getAll(e).join("");super.set(e,o),n!==super.getAll(e).join("")&&(this.#a(),Yt(this.#e))}sort(){super.sort(),this.#a(),Yt(this.#e)}toString(){return r(this.#e),super.toString()}values(){return r(this.#e),super.values()}entries(){return r(this.#e),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#e),super.size}}let el=null;function tl(){return el}var al=T('<input type="number" class="input-number svelte-p4s2z"/> <input type="range" class="svelte-p4s2z"/>',1),sl=T("<option> </option>"),ll=T("<select></select>"),rl=T("<option> </option>"),nl=T("<select></select>"),ol=T('<tr><td class="svelte-p4s2z"> </td><td class="svelte-p4s2z"><button class="svelte-p4s2z"> </button></td><td class="svelte-p4s2z"><!></td><td> </td><td> </td><td class="svelte-p4s2z"> </td><td class="svelte-p4s2z"> </td><td> </td></tr>'),cl=T('<tbody class="svelte-p4s2z"><tr class="separator svelte-p4s2z"><td class="svelte-p4s2z"> </td><td class="svelte-p4s2z"> </td><td class="svelte-p4s2z"><label class="svelte-p4s2z"><input type="checkbox" class="svelte-p4s2z"/> <span class="svelte-p4s2z"></span></label></td></tr></tbody> <tbody></tbody>',1),il=T('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-p4s2z"> </p>',1),vl=T('<section class="svelte-p4s2z"><h2 class="svelte-p4s2z">Parameters</h2> <main class="svelte-p4s2z"><label for="loadFParams" class="fileUpload svelte-p4s2z">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-p4s2z"/> <button class="svelte-p4s2z">Set Params Default</button> <button class="svelte-p4s2z">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-p4s2z"><thead class="svelte-p4s2z"><tr class="svelte-p4s2z"><td class="svelte-p4s2z">&#35;</td><td class="svelte-p4s2z">Parameter name</td><td class="svelte-p4s2z">Value<span class="svelte-p4s2z"><button class="svelte-p4s2z">&minus;</button><button class="svelte-p4s2z">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-p4s2z">Min</td><td class="svelte-p4s2z">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-p4s2z"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-p4s2z">Save Parameters to File</button> <button class="svelte-p4s2z">Save Parameters as URL</button> <button class="svelte-p4s2z">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-p4s2z"><img class="svelte-p4s2z"/></button> <div class="mini-canvas svelte-p4s2z"><!></div> <div class="mini-canvas svelte-p4s2z"><!></div></section>');function dl(l,e){be(e,!0);let o=K(""),n=K(!1),v=K(""),c=K(!1),d=K(!1),i=K(!1),u=K(!1),h=K(!1),m=K(""),L=K(""),j=K("");const x=e.pDef;let f=K(tt(ae(x.params[0].name))),I=K(!1),R=K(tt(ve(re(x.params))));Ra(()=>{y(f,ae(e.pDef.params[0].name),!0),y(R,ve(re(e.pDef.params)),!0)});function Z(b,p){let N="",M=!1;b!==e.pDef.partName&&(N+=`warn361: read partName: '${b}'  expected partName: '${e.pDef.partName}'
`,M=!0);let ee=0,de=0,Ne=0;const it=[];for(const me of e.pDef.params)it.push(me.name),Object.hasOwn(p,me.name)?(ee+=1,H[e.pDef.partName][me.name]===p[me.name]?Ne+=1:H[e.pDef.partName][me.name]=p[me.name]):de+=1;let ke=0;for(const me of Object.keys(p))it.includes(me)||(ke+=1,N+=`warn363: parameter ${me} not in the scope of the design (${ke})
`);const St=ke>0,Ve=new Date().toLocaleTimeString();return N+=`Params loaded at ${Ve} :`,N+=` def-nb: ${Object.keys(e.pDef.params).length}`,N+=`, cover-nb: ${ee}, uncover-nb: ${de}
`,N+=` load-nb: ${Object.keys(p).length}`,N+=`, equal-nb: ${Ne}, changed-nb: ${ee-Ne}`,N+=`, out-of-scope: ${ke}`,[N,M||St]}async function A(b){try{const p=await fetch(b);if(!p.ok)throw`err627: error while fetching ${b}`;const N=await p.text(),[M]=ja(N);(ee=>{var de=la(ee,2);y(v,de[0],!0),y(c,de[1],!0)})(Z(M.partName,M.pVal)),y(o,M.comment,!0)}catch(p){let N=`err223: error by fetching px file
`;N+=p,y(v,N,!0),y(c,!0)}}async function Q(){{const b=new $s(Oa.url.search),p="pxUrl";if(b.has(p)){const M=b.get(p);b.delete(p),M?await A(M):(y(v,`err123: error by parsing URL-search-params
`),y(c,!0))}const N={};for(const[M,ee]of b){const de=Number(ee);isNaN(de)||(N[M]=de)}Object.keys(N).length>0&&(M=>{var ee=la(M,2);y(v,ee[0],!0),y(c,ee[1],!0)})(Z(e.pDef.partName,N))}}Q();function le(b){try{const[p]=ja(b);(N=>{var M=la(N,2);y(v,M[0],!0),y(c,M[1],!0)})(Z(p.partName,p.pVal)),y(o,p.comment,!0)}catch(p){let N=`err723: error by parsing parameter file
`;N+=p,y(v,N,!0),y(c,!0)}}async function oe(b){const p=await b.text();le(p)}function ce(b){if(b.target){const p=b.target.files;p&&oe(p[0])}}function g(){Da(e.pDef.partName,H[e.pDef.partName],r(o))}function U(){const b={};for(const p of e.pDef.params)b[p.name]=p.init;(p=>{var N=la(p,2);y(v,N[0],!0),y(c,N[1],!0)})(Z(e.pDef.partName,b))}function q(){if(r(m)!==void 0&&r(m)!==""){const b=`${e.pDef.partName}_${r(m)}`;{const p=window.localStorage.getItem(b);p===null?(y(v,`Warn157: localStorage key ${b} is null`),y(c,!0)):le(p)}}else y(v,"Warn239: No valid name for loading from localStorage!"),y(c,!0)}function E(){if(r(L)!==void 0&&r(L)!==""){const b=`${e.pDef.partName}_${r(L)}`,p=/\..*$/,N=new Date().toISOString().replace(p,""),M=ka(N,e.pDef.partName,H[e.pDef.partName],r(o));window.localStorage.setItem(b,M)}else console.log("Warn639: No valid name for writing to localStorage!")}function $(){return Js(Oa.url.href,H[e.pDef.partName]).toString()}function J(){y(j,$(),!0),y(u,!0)}function ie(){}function ae(b){let p=ya("/pgdsvg/default_param_blank.svg");return Object.keys(e.pDef.paramSvg).includes(b)&&(p=ya(`/pgdsvg/${e.pDef.paramSvg[b]}`)),p}function G(b){y(f,ae(b),!0)}function fe(){y(I,!0)}function re(b){const p=[];let M={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},ee=0;for(const de of b)de.pType===ra.eSectionSeparator?(p.push(M),ee+=1,M={sectionName:de.name,sectionID:`g${ee}${de.name}`,sectionVisCollapse:!0,params:[]}):M.params.push(de);return p.push(M),p}function ve(b){const p={};for(const N of b)p[N.sectionID]=N.sectionVisCollapse;return p}let Me=ye(()=>re(e.pDef.params));function _(){y(n,!0)}function S(){y(n,!1)}let O=ye(()=>r(n)?2:4),W=ye(()=>r(n)?2:3),Ae=ye(()=>r(n)?50:70);var xe=vl(),Te=a(s(xe),2),Ie=a(s(Te),2);Ie.__change=ce;var Xe=a(Ie,2);Xe.__click=()=>{y(d,!0)};var Re=a(Xe,2);Re.__click=()=>{y(i,!0)};var Ce=a(Re,2);Et(Ce,{okName:"Overwrite Parameters",okFunc:U,get modalOpen(){return r(d)},set modalOpen(b){y(d,b,!0)},children:(b,p)=>{we();var N=Sa("Load the default parameters ?");C(b,N)},$$slots:{default:!0}});var at=a(Ce,2);Et(at,{okName:"Load Parameters",okFunc:q,get modalOpen(){return r(i)},set modalOpen(b){y(i,b,!0)},children:(b,p)=>{Ks(b,{get pageName(){return e.pDef.partName},get storeName(){return r(m)},set storeName(N){y(m,N,!0)}})},$$slots:{default:!0}});var Ye=a(at,2);pa(Ye);let qt;var st=a(Ye,2),bt=s(st),pt=s(bt),Be=a(s(pt),2),lt=a(s(Be)),Kt=s(lt);Kt.__click=_;var yt=a(Kt);yt.__click=S,t(lt),t(Be);var Gt=a(Be);let rt;var Bt=a(Gt);let ht;var va=a(Bt,3);let xt;t(pt),t(bt);var kt=a(bt);je(kt,19,()=>r(Me),b=>b.sectionName,(b,p,N)=>{var M=cl(),ee=Le(M),de=s(ee),Ne=s(de),it=s(Ne,!0);t(Ne);var ke=a(Ne),St=s(ke,!0);t(ke);var Ve=a(ke),Nt=s(Ve),me=s(Nt);se(me),we(2),t(Nt),t(Ve),t(de),t(ee);var Je=a(ee,2);let ta;je(Je,23,()=>r(p).params,We=>We.name,(We,Y,jt)=>{var vt=ol();let At;var Ct=s(vt),Ot=s(Ct);t(Ct);var Qe=a(Ct),Pt=s(Qe);Pt.__click=()=>G(r(Y).name);var Ft=s(Pt,!0);t(Pt),t(Qe);var Mt=a(Qe),Tt=s(Mt);{var da=P=>{var F=al(),z=Le(F);se(z);var B=a(z,2);se(B),te(()=>{V(z,"min",r(Y).min),V(z,"max",r(Y).max),V(z,"step",r(Y).step),V(B,"min",r(Y).min),V(B,"max",r(Y).max),V(B,"step",r(Y).step)}),_t(z,()=>H[e.pDef.partName][r(Y).name],Oe=>H[e.pDef.partName][r(Y).name]=Oe),_t(B,()=>H[e.pDef.partName][r(Y).name],Oe=>H[e.pDef.partName][r(Y).name]=Oe),C(P,F)},aa=P=>{var F=Zt(),z=Le(F);{var B=ge=>{var De=ll();je(De,22,()=>["Off","On"],ue=>ue,(ue,Pe,Ue)=>{var _e=sl(),qe=s(_e,!0);t(_e);var Ke={};te(()=>{w(qe,Pe),Ke!==(Ke=r(Ue))&&(_e.value=(_e.__value=r(Ue))??"")}),C(ue,_e)}),t(De),Ma(De,()=>H[e.pDef.partName][r(Y).name],ue=>H[e.pDef.partName][r(Y).name]=ue),C(ge,De)},Oe=ge=>{var De=Zt(),ue=Le(De);{var Pe=_e=>{var qe=nl();je(qe,22,()=>r(Y).dropdown,Ke=>Ke,(Ke,qa,wa)=>{var Wt=rl(),Ka=s(Wt,!0);t(Wt);var za={};te(()=>{w(Ka,qa),za!==(za=r(wa))&&(Wt.value=(Wt.__value=r(wa))??"")}),C(Ke,Wt)}),t(qe),Ma(qe,()=>H[e.pDef.partName][r(Y).name],Ke=>H[e.pDef.partName][r(Y).name]=Ke),C(_e,qe)},Ue=_e=>{var qe=Sa("unknown");C(_e,qe)};et(ue,_e=>{r(Y).pType===ra.eDropdown?_e(Pe):_e(Ue,!1)},!0)}C(ge,De)};et(z,ge=>{r(Y).pType===ra.eCheckbox?ge(B):ge(Oe,!1)},!0)}C(P,F)};et(Tt,P=>{r(Y).pType===ra.eNumber?P(da):P(aa,!1)})}t(Mt);var dt=a(Mt);let Rt;var Ut=s(dt,!0);t(dt);var ut=a(dt);let ft;var ua=s(ut,!0);t(ut);var mt=a(ut),fa=s(mt,!0);t(mt);var Ze=a(mt),It=s(Ze,!0);t(Ze);var Xt=a(Ze);let sa;var k=s(Xt,!0);t(Xt),t(vt),te(()=>{At=he(vt,1,"svelte-p4s2z",null,At,{changed:H[e.pDef.partName][r(Y).name]!==r(Y).init}),w(Ot,`${r(N)+1}.${r(jt)+1}`),w(Ft,r(Y).name),Rt=he(dt,1,"svelte-p4s2z",null,Rt,{hideColumn:r(n)}),w(Ut,r(Y).unit),ft=he(ut,1,"svelte-p4s2z",null,ft,{hideColumn:r(n)}),w(ua,r(Y).init),w(fa,r(Y).min),w(It,r(Y).max),sa=he(Xt,1,"svelte-p4s2z",null,sa,{hideColumn:r(n)}),w(k,r(Y).step)}),C(We,vt)}),t(Je),te(()=>{w(it,r(N)+1),V(ke,"colspan",r(O)),w(St,r(p).sectionName),V(Ve,"colspan",r(W)),ta=he(Je,1,"svelte-p4s2z",null,ta,{collaps:r(R)[r(p).sectionID]})}),ze(me,()=>r(R)[r(p).sectionID],We=>r(R)[r(p).sectionID]=We),C(b,M)}),t(st);var He=a(st,2),Dt=a(s(He),2);se(Dt),t(He);var nt=a(He,2);nt.__click=g;var Ht=a(nt,2);Ht.__click=J;var ot=a(Ht,2);ot.__click=()=>{y(h,!0)};var Jt=a(ot,2);Et(Jt,{okName:"Done",okFunc:ie,sizeLarge:!0,get modalOpen(){return r(u)},set modalOpen(b){y(u,b,!0)},children:(b,p)=>{var N=il(),M=a(Le(N),2),ee=s(M,!0);t(M),te(()=>w(ee,r(j))),C(b,N)},$$slots:{default:!0}});var Qt=a(Jt,2);Et(Qt,{okName:"Save into localStorage",okFunc:E,get modalOpen(){return r(h)},set modalOpen(b){y(h,b,!0)},children:(b,p)=>{Zs(b,{get pageName(){return e.pDef.partName},get storeName(){return r(L)},set storeName(N){y(L,N,!0)}})},$$slots:{default:!0}}),t(Te);var $t=a(Te,2);Va($t,{get svgPath(){return r(f)},get modalOpen(){return r(I)},set modalOpen(b){y(I,b,!0)}});var Ee=a($t,2);Ee.__click=fe;var ct=s(Ee);t(Ee);var wt=a(Ee,2),zt=s(wt);Ta(zt,{get pFig(){return e.pFig},full:!0}),t(wt);var ea=a(wt,2),Lt=s(ea);Ta(Lt,{get pFig(){return e.pFig},full:!1}),t(ea),t(xe),te(()=>{ca(Ye,r(v)),qt=he(Ye,1,"svelte-p4s2z",null,qt,{colorWarn:r(c)}),rt=he(Gt,1,"svelte-p4s2z",null,rt,{hideColumn:r(n)}),ht=he(Bt,1,"svelte-p4s2z",null,ht,{hideColumn:r(n)}),xt=he(va,1,"svelte-p4s2z",null,xt,{hideColumn:r(n)}),V(Dt,"size",r(Ae)),V(ct,"src",r(f)),V(ct,"alt",r(f))}),_t(Dt,()=>r(o),b=>y(o,b)),C(l,xe),pe()}Fe(["change","click"]);var ul=T('<nav class="svelte-ngg63f"><button class="svelte-ngg63f">0</button> <button class="svelte-ngg63f">&lt-</button> <button class="svelte-ngg63f">|&lt</button> <button class="svelte-ngg63f">||</button> <button class="svelte-ngg63f">&gt|</button> <button class="svelte-ngg63f">-&gt</button> <input type="range" min="0" class="svelte-ngg63f"/> <input type="number" min="0" class="svelte-ngg63f"/></nav>');function fl(l,e){be(e,!0);let o=Se(e,"tMax",3,10),n=Se(e,"tStep",3,.1),v=Se(e,"tUpdate",3,500),c=Se(e,"simTime",15,0),d=null,i=0,u;const h=4;function m(){d!==null&&(clearInterval(d),d=null)}function L(){u<0&&c()<=0?c(o()):u>0&&c()>=o()?c(0):c(c()+u)}function j(){const J=v()/2**(Math.abs(i)-1);u=i<0?-n():n(),d=setInterval(L,J)}function x(){m(),c(0),i=0}function f(){m(),i=0,u=-n(),L()}function I(){m(),i=0,u=n(),L()}function R(){m(),i=Math.max(i-1,-h),j()}function Z(){m(),i=Math.min(i+1,h),j()}function A(){m(),i=0}Ds(()=>{m()});var Q=ul(),le=s(Q);le.__click=x;var oe=a(le,2);oe.__click=R;var ce=a(oe,2);ce.__click=f;var g=a(ce,2);g.__click=A;var U=a(g,2);U.__click=I;var q=a(U,2);q.__click=Z;var E=a(q,2);se(E);var $=a(E,2);se($),t(Q),te(()=>{V(E,"max",o()),V(E,"step",n()),V($,"max",o()),V($,"step",n())}),_t(E,c),_t($,c),C(l,Q),pe()}Fe(["click"]);var ml=T('<nav class="svelte-al8dp1"><button aria-labelledby="zoomInit" class="svelte-al8dp1"><div class="zero svelte-al8dp1"></div></button><button aria-labelledby="zoomIn" class="svelte-al8dp1"><div class="zoomin svelte-al8dp1"></div></button><button aria-labelledby="zoomOut" class="svelte-al8dp1"><div class="zoomout svelte-al8dp1"></div></button><button aria-labelledby="moveLeft" class="svelte-al8dp1"><div class="arrowleft svelte-al8dp1"></div></button><button aria-labelledby="moveRight" class="svelte-al8dp1"><div class="arrowright svelte-al8dp1"></div></button><button aria-labelledby="moveUp" class="svelte-al8dp1"><div class="arrowup svelte-al8dp1"></div></button><button aria-labelledby="moveDown" class="svelte-al8dp1"><div class="arrowdown svelte-al8dp1"></div></button></nav>');function gl(l,e){be(e,!0);var o=ml(),n=s(o);n.__click=()=>e.zoomClick("zoomInit");var v=a(n);v.__click=()=>e.zoomClick("zoomIn");var c=a(v);c.__click=()=>e.zoomClick("zoomOut");var d=a(c);d.__click=()=>e.zoomClick("moveLeft");var i=a(d);i.__click=()=>e.zoomClick("moveRight");var u=a(i);u.__click=()=>e.zoomClick("moveUp");var h=a(u);h.__click=()=>e.zoomClick("moveDown"),t(o),C(l,o),pe()}Fe(["click"]);var X=As(()=>D),_l=T('<div class="svelte-112utfm"><label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>main part</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>main skeleton</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>second parts</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>second skeletons</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>dynamics</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>ruler</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>frame of reference</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>points</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>lines</label> <label class="svelte-112utfm"><input type="checkbox" class="svelte-112utfm"/>vectors</label></div>');function bl(l,e){be(e,!1),zs();var o=_l(),n=s(o),v=s(n);se(v),we(),t(n);var c=a(n,2),d=s(c);se(d),we(),t(c);var i=a(c,2),u=s(i);se(u),we(),t(i);var h=a(i,2),m=s(h);se(m),we(),t(h);var L=a(h,2),j=s(L);se(j),we(),t(L);var x=a(L,2),f=s(x);se(f),we(),t(x);var I=a(x,2),R=s(I);se(R),we(),t(I);var Z=a(I,2),A=s(Z);se(A),we(),t(Z);var Q=a(Z,2),le=s(Q);se(le),we(),t(Q);var oe=a(Q,2),ce=s(oe);se(ce),we(),t(oe),t(o),ze(v,()=>X().dLayers.main,g=>X(X().dLayers.main=g)),ze(d,()=>X().dLayers.mainB,g=>X(X().dLayers.mainB=g)),ze(u,()=>X().dLayers.second,g=>X(X().dLayers.second=g)),ze(m,()=>X().dLayers.secondB,g=>X(X().dLayers.secondB=g)),ze(j,()=>X().dLayers.dynamics,g=>X(X().dLayers.dynamics=g)),ze(f,()=>X().dLayers.ruler,g=>X(X().dLayers.ruler=g)),ze(R,()=>X().dLayers.refframe,g=>X(X().dLayers.refframe=g)),ze(A,()=>X().dLayers.points,g=>X(X().dLayers.points=g)),ze(le,()=>X().dLayers.lines,g=>X(X().dLayers.lines=g)),ze(ce,()=>X().dLayers.vectors,g=>X(X().dLayers.vectors=g)),C(l,o),pe()}var pl=T('<section class="svelte-1vrrpdb"><!> <div class="rack svelte-1vrrpdb"><canvas class="full svelte-1vrrpdb"></canvas> <!></div> <div class="rack svelte-1vrrpdb"><canvas class="zoom svelte-1vrrpdb"></canvas> <!></div></section>');function yl(l,e){be(e,!0);let o=Se(e,"simTime",15,0);const n=400,v=1200;let c=K(n),d,i,u;function h(_,S){if(d){const O=d.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{u=_.getAdjustFull(O.canvas.width,O.canvas.height),_.draw(O,u,S)}catch(W){console.log(W)}}}function m(_,S,O){if(i){const W=i.getContext("2d");W.clearRect(0,0,W.canvas.width,W.canvas.height);try{(S===void 0||S.init===0)&&(S=_.getAdjustZoom(W.canvas.width,W.canvas.height)),_.draw(W,S,O)}catch(Ae){console.log(Ae)}}}function L(){const _=d.getContext("2d"),S=i.getContext("2d"),O=Math.min(Math.max(.4*r(c),n),v);_.canvas.width=O,_.canvas.height=O,S.canvas.width=O,S.canvas.height=O,D.canvasZWidth=O,D.zAdjust.init===0&&(D.zAdjust=e.pFig.getAdjustZoom(S.canvas.width,S.canvas.height))}function j(){L(),h(e.pFig,D.dLayers),m(e.pFig,D.zAdjust,D.dLayers)}function x(_,S,O){h(_,O),m(_,S,O)}ws(()=>{L()}),xa(()=>{x(e.pFig,D.zAdjust,D.dLayers)});function f(_){const S=i.getContext("2d");switch(_){case"zoomInit":D.zAdjust=e.pFig.getAdjustZoom(S.canvas.width,S.canvas.height);break;case"zoomIn":D.zAdjust=na(.7,D.zAdjust);break;case"zoomOut":D.zAdjust=na(1.3,D.zAdjust);break;case"moveLeft":D.zAdjust.xMin+=-.2*D.zAdjust.xyDiff;break;case"moveRight":D.zAdjust.xMin+=.2*D.zAdjust.xyDiff;break;case"moveUp":D.zAdjust.yMin+=.2*D.zAdjust.xyDiff;break;case"moveDown":D.zAdjust.yMin+=-.2*D.zAdjust.xyDiff;break;default:console.log(`ERR423: ${_} has no case!`)}m(e.pFig,D.zAdjust,D.dLayers)}const I=3e3,R=10,Z=3;let A={timestamp:0,offsetX:0,offsetY:0};function Q(_){_.button===0&&(A.timestamp=Date.now(),A.offsetX=_.offsetX,A.offsetY=_.offsetY)}function le(_){if(_.button===0)if(Date.now()-A.timestamp<I){const S=Math.abs(A.offsetX-_.offsetX),O=Math.abs(A.offsetY-_.offsetY);if(S<R&&O<R){const[W,Ae]=$e(_.offsetX,_.offsetY,u);D.zAdjust=ds(W,Ae,D.zAdjust),x(e.pFig,D.zAdjust,D.dLayers)}if(S>R&&O>R){const W=S/O,Ae=1/W;if(W<Z&&Ae<Z){const[xe,Te]=$e(_.offsetX,_.offsetY,u),[Ie,Xe]=$e(A.offsetX,A.offsetY,u),Ce=i.getContext("2d").canvas.width;D.zAdjust=us(xe,Te,Ie,Xe,Ce,Ce),x(e.pFig,D.zAdjust,D.dLayers)}}}else console.log(`Warn205: ignore ${_.offsetX} ${_.offsetY} because too slow`)}function oe(_){if(d){const S=d.getContext("2d");if(_.buttons===1){const O=_.offsetX-A.offsetX,W=_.offsetY-A.offsetY;h(e.pFig,D.dLayers),S.beginPath(),S.rect(A.offsetX,A.offsetY,O,W),S.strokeStyle=ma.mouse,S.stroke()}if(D.dLayers.ruler){const[O,W]=$e(_.offsetX,_.offsetY,u);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=ma.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${W.toFixed(4)}`,5,20)}}}let ce,g,U;function q(_){if(_.button===0){const[S,O]=$e(_.offsetX,_.offsetY,D.zAdjust);ce=S,g=O,U=fs(D.zAdjust)}}function E(_){if(_.buttons===1){const[S,O]=$e(_.offsetX,_.offsetY,U);D.zAdjust=ms(ce,g,S,O,U),m(e.pFig,D.zAdjust,D.dLayers)}else if(D.dLayers.ruler&&i){const S=i.getContext("2d"),[O,W]=$e(_.offsetX,_.offsetY,D.zAdjust);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=ma.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${W.toFixed(4)}`,5,20)}}function $(_){_.preventDefault(),_.deltaY>0?D.zAdjust=na(.7,D.zAdjust):D.zAdjust=na(1.3,D.zAdjust),m(e.pFig,D.zAdjust,D.dLayers)}var J=pl();Na("resize",ns,j);var ie=s(J);bl(ie,{});var ae=a(ie,2),G=s(ae);V(G,"width",n),V(G,"height",n),G.__mousedown=Q,G.__mouseup=le,G.__mousemove=oe,ia(G,_=>d=_,()=>d);var fe=a(G,2);fl(fe,{get tMax(){return e.pDefSim.tMax},get tStep(){return e.pDefSim.tStep},get tUpdate(){return e.pDefSim.tUpdate},get simTime(){return o()},set simTime(_){o(_)}}),t(ae);var re=a(ae,2),ve=s(re);V(ve,"width",n),V(ve,"height",n),ve.__mousedown=q,ve.__mousemove=E,ia(ve,_=>i=_,()=>i);var Me=a(ve,2);gl(Me,{zoomClick:f}),t(re),t(J),js("innerWidth",_=>y(c,_,!0)),Na("wheel",ve,$),C(l,J),pe()}Fe(["mousedown","mouseup","mousemove"]);var hl=T("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),xl=T('<li class="svelte-2axboh"><input type="checkbox" class="toggle svelte-2axboh"/> <label class="label svelte-2axboh"><div class="arrow svelte-2axboh"></div> </label> <button class="svelte-2axboh"> </button> <button class="svelte-2axboh">Export parameters</button> <div class="nested svelte-2axboh"><article class="svelte-2axboh"> <strong> </strong> </article> <table class="svelte-2axboh"><thead class="svelte-2axboh"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-2axboh"></tbody></table></div></li>'),kl=T('<section class="svelte-2axboh"><h2 class="svelte-2axboh">Sub-designs <span class="svelte-2axboh"> </span></h2> <ol class="svelte-2axboh"></ol></section>');function Dl(l,e){be(e,!0);const o=ye(()=>Object.keys(e.subD));async function n(x){const f=e.subD[x];Ea(f.partName,Aa(f.dparam),!0);const I=_s(`/${e.pLink[f.partName]}`);Ha(I)}function v(x){const f=e.subD[x].partName,I=e.subD[x].dparam,R=`sub-design parameters of ${f} from ${e.origPartName}`;Da(f,Aa(I),R)}function c(x){let f="[ ";return f+=`${gt(ga(x[0]))}, `,f+=`${gt(ga(x[1]))}, `,f+=`${gt(ga(x[2]))} ]`,f}function d(x){let f="[ ";return f+=`${gt(x[0])}, `,f+=`${gt(x[1])}, `,f+=`${gt(x[2])} ]`,f}function i(x){return x?"Yes":""}var u=kl(),h=s(u),m=a(s(h)),L=s(m);t(m),t(h);var j=a(h,2);je(j,20,()=>r(o),x=>x,(x,f)=>{var I=xl(),R=s(I);se(R),gs(R,!1);var Z=a(R,2),A=a(s(Z));t(Z);var Q=a(Z,2);Q.__click=()=>n(f);var le=s(Q);t(Q);var oe=a(Q,2);oe.__click=()=>v(f);var ce=a(oe,2),g=s(ce),U=s(g),q=a(U),E=s(q,!0);t(q);var $=a(q);t(g);var J=a(g,2),ie=a(s(J));je(ie,22,()=>Object.keys(e.subD[f].dparam),ae=>ae,(ae,G,fe)=>{var re=hl();let ve;var Me=s(re),_=s(Me,!0);t(Me);var S=a(Me),O=s(S,!0);t(S);var W=a(S),Ae=s(W,!0);t(W);var xe=a(W),Te=s(xe),Ie=s(Te,!0);t(Te),t(xe);var Xe=a(xe),Re=s(Xe),Ce=s(Re,!0);t(Re),t(Xe),t(re),te(at=>{ve=he(re,1,"svelte-2axboh",null,ve,{changed:e.subD[f].dparam[G].chg}),w(_,r(fe)+1),w(O,G),w(Ae,e.subD[f].dparam[G].val),w(Ie,e.subD[f].dparam[G].init),w(Ce,at)},[()=>i(e.subD[f].dparam[G].chg)]),C(ae,re)}),t(ie),t(J),t(ce),t(I),te((ae,G,fe)=>{V(R,"id",`cb_${f??""}`),V(Z,"for",`cb_${f??""}`),w(A,` ${f??""}`),w(le,`Go to ${e.pLink[e.subD[f].partName]??""}`),w(U,`${ae??""} parameters of `),w(E,e.subD[f].partName),w($,` with orientation ${G??""} (degree) at position
						${fe??""} (mm)`)},[()=>Object.keys(e.subD[f].dparam).length,()=>c(e.subD[f].orientation),()=>d(e.subD[f].position)]),C(x,I)}),t(j),t(u),te(()=>w(L,`(Number of sub-instances: ${r(o).length??""})`)),C(l,u),pe()}Fe(["click"]);var wl=T("<button> </button>"),zl=T('<tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">2d- svg</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr>'),Ll=T('<tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">2d- dxf</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr>'),Sl=T('<!> <section class="svelte-88egy4"><h2 class="svelte-88egy4">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-88egy4"><h2 class="svelte-88egy4">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-88egy4"><h2 class="svelte-88egy4">Export</h2> <table class="svelte-88egy4"><caption class="svelte-88egy4">Output files</caption><thead class="svelte-88egy4"><tr class="svelte-88egy4"><th class="svelte-88egy4">#</th><th class="svelte-88egy4">Filename</th><th class="svelte-88egy4">Type</th><th class="svelte-88egy4">Preview</th><th class="svelte-88egy4">Download</th></tr></thead><tbody class="svelte-88egy4"><tr class="svelte-88egy4"><td class="svelte-88egy4">1</td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">0-params- pxJson</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4">2</td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">1-log- txtLog</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><!><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">2d- svg</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><!><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">2d- dxf</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">4-pax- paxJson</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">5-script- scad</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">5-script- jsCad</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">5-script- pyFreecad</td><td class="svelte-88egy4"><button class="svelte-88egy4">preview</button></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr><tr class="svelte-88egy4"><td class="svelte-88egy4"> </td><td class="svelte-88egy4"> </td><td class="svelte-88egy4">6-zip- zip</td><td class="svelte-88egy4"></td><td class="svelte-88egy4"><button class="svelte-88egy4">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-88egy4"><textarea readonly="" wrap="soft" class="svelte-88egy4"></textarea> <button class="bback svelte-88egy4">close - back - escape</button></dialog> <!></section>',1);function Nl(l,e){be(e,!0);const o="ParametrixAll";function n(k){let P=!0;const F=/warn/i;return k.search(F)<0&&(P=!1),P}function v(k,P){let F=P;if(k.length===0)console.log("warn404: Drawing has an empty face list");else{const z=k.slice();z.push(o),z.includes(F)||(F=k[0])}return F}function c(k,P){let F;const z=Object.keys(k),B=v(z,P);return z.includes(B)?F=k[B]:F=hs(k),F}let d=K(0),i=K(o);Ra(()=>{y(i,v(Object.keys(e.fgeom(0,H[e.pDef.partName]).fig),""),!0)});let u=ye(()=>e.fgeom(r(d),H[e.pDef.partName])),h=ye(()=>{const k=new Date().toLocaleTimeString();let P=`Geometry ${e.pDef.partName} computed at ${k}
`;return P+=r(u).logstr,P}),m=ye(()=>Object.keys(r(u).fig)),L=ye(()=>r(u).calcErr),j=ye(()=>n(r(u).logstr)),x=ye(()=>c(r(u).fig,r(i))),f=ye(()=>r(u).sub);function I(k,P){const F=document.createElement("a"),z=URL.createObjectURL(P);F.setAttribute("href",z),F.setAttribute("download",k),F.click(),F.remove(),URL.revokeObjectURL(z)}function R(k,P,F){const z=document.createElement("a"),B="data:"+F+";utf-8,"+encodeURIComponent(P);z.setAttribute("href",B),z.setAttribute("download",k),z.click(),z.remove()}function Z(){const k=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(k,"").replace(P,"").replace("T","_")}async function A(k){const P=/^svg_/,F=/^dxf_/;let z=ne.eSVG,B="all";k.match(P)?(z=ne.eSVG,B=k.replace(P,"")):k.match(F)?(z=ne.eDXF,B=k.replace(F,"")):k==="allsvg"?z=ne.eSVGALL:k==="alldxf"?z=ne.eDXFALL:k==="compute_log"?z=ne.eTXTLOG:k==="pax"?z=ne.ePAX:k==="oscad"?z=ne.eOPENSCAD:k==="ojscad"?z=ne.eJSCAD:k==="freecad"?z=ne.eFREECAD:k==="zip"?z=ne.eZIP:console.log(`err883: downloadExport iExportFace ${k} invalid`);const Oe=ps(z),ge=xs(z),De=ys(z),ue=e.pDef.partName+"_"+B+"_"+Z()+Oe;if(De){const Pe=await bs(e.fgeom,r(d),H[e.pDef.partName],e.pDef,z);I(ue,Pe)}else{const Pe=Ca(e.fgeom,H[e.pDef.partName],e.pDef,B,z);R(ue,Pe,ge)}}async function Q(){Da(e.pDef.partName,H[e.pDef.partName],"")}let le,oe=K("");function ce(k){y(oe,k,!0),le.showModal()}function g(k,P){ce(Ca(e.fgeom,H[e.pDef.partName],e.pDef,k,P))}function U(){le.close()}var q=Sl(),E=Le(q);dl(E,{get pDef(){return e.pDef},get pFig(){return r(x)}});var $=a(E,2),J=a(s($),2);pa(J);let ie;t($);var ae=a($,2),G=s(ae),fe=a(s(G));je(fe,16,()=>r(m),k=>k,(k,P)=>{var F=wl();F.__click=()=>{y(i,P,!0)};var z=s(F,!0);t(F),te(()=>{he(F,1,Pa({theFace:r(i)===P}),"svelte-88egy4"),w(z,P)}),C(k,F)});var re=a(fe,2);re.__click=()=>{y(i,o)},t(G),t(ae);var ve=a(ae,2);yl(ve,{get pDefSim(){return e.pDef.sim},get pFig(){return r(x)},get simTime(){return r(d)},set simTime(k){y(d,k,!0)}});var Me=a(ve,2),_=a(s(Me),2),S=a(s(_),2),O=s(S),W=a(s(O)),Ae=s(W);t(W);var xe=a(W,2),Te=s(xe);Te.__click=()=>{ce(Hs(e.pDef.partName,H[e.pDef.partName],""))},t(xe);var Ie=a(xe),Xe=s(Ie);Xe.__click=Q,t(Ie),t(O);var Re=a(O),Ce=a(s(Re)),at=s(Ce);t(Ce);var Ye=a(Ce,2),qt=s(Ye);qt.__click=()=>{g("all",ne.eTXTLOG)},t(Ye);var st=a(Ye),bt=s(st);bt.__click=async()=>{await A("compute_log")},t(st),t(Re);var pt=a(Re);je(pt,18,()=>r(m),k=>k,(k,P,F)=>{var z=zl(),B=s(z),Oe=s(B,!0);t(B);var ge=a(B),De=s(ge);t(ge);var ue=a(ge,2),Pe=s(ue);Pe.__click=()=>{g(P,ne.eSVG)},t(ue);var Ue=a(ue),_e=s(Ue);_e.__click=async()=>{await A(`svg_${P}`)},t(Ue),t(z),te(()=>{w(Oe,3+r(F)),w(De,`${e.pDef.partName??""}_${P??""}.svg`)}),C(k,z)});var Be=a(pt),lt=s(Be),Kt=s(lt,!0);t(lt);var yt=a(lt),Gt=s(yt);t(yt);var rt=a(yt,2),Bt=s(rt);Bt.__click=()=>{g("all",ne.eSVGALL)},t(rt);var ht=a(rt),va=s(ht);va.__click=async()=>{await A("allsvg")},t(ht),t(Be);var xt=a(Be);je(xt,18,()=>r(m),k=>k,(k,P,F)=>{var z=Ll(),B=s(z),Oe=s(B,!0);t(B);var ge=a(B),De=s(ge);t(ge);var ue=a(ge,2),Pe=s(ue);Pe.__click=()=>{g(P,ne.eDXF)},t(ue);var Ue=a(ue),_e=s(Ue);_e.__click=async()=>{await A(`dxf_${P}`)},t(Ue),t(z),te(()=>{w(Oe,4+r(m).length+r(F)),w(De,`${e.pDef.partName??""}_${P??""}.dxf`)}),C(k,z)});var kt=a(xt),He=s(kt),Dt=s(He,!0);t(He);var nt=a(He),Ht=s(nt);t(nt);var ot=a(nt,2),Jt=s(ot);Jt.__click=()=>{g("all",ne.eDXFALL)},t(ot);var Qt=a(ot),$t=s(Qt);$t.__click=async()=>{await A("alldxf")},t(Qt),t(kt);var Ee=a(kt),ct=s(Ee),wt=s(ct,!0);t(ct);var zt=a(ct),ea=s(zt);t(zt);var Lt=a(zt,2),b=s(Lt);b.__click=()=>{g("all",ne.ePAX)},t(Lt);var p=a(Lt),N=s(p);N.__click=async()=>{await A("pax")},t(p),t(Ee);var M=a(Ee),ee=s(M),de=s(ee,!0);t(ee);var Ne=a(ee),it=s(Ne);t(Ne);var ke=a(Ne,2),St=s(ke);St.__click=()=>{g("all",ne.eOPENSCAD)},t(ke);var Ve=a(ke),Nt=s(Ve);Nt.__click=async()=>{await A("oscad")},t(Ve),t(M);var me=a(M),Je=s(me),ta=s(Je,!0);t(Je);var We=a(Je),Y=s(We);t(We);var jt=a(We,2),vt=s(jt);vt.__click=()=>{g("all",ne.eJSCAD)},t(jt);var At=a(jt),Ct=s(At);Ct.__click=async()=>{await A("ojscad")},t(At),t(me);var Ot=a(me),Qe=s(Ot),Pt=s(Qe,!0);t(Qe);var Ft=a(Qe),Mt=s(Ft);t(Ft);var Tt=a(Ft,2),da=s(Tt);da.__click=()=>{g("all",ne.eFREECAD)},t(Tt);var aa=a(Tt),dt=s(aa);dt.__click=async()=>{await A("freecad")},t(aa),t(Ot);var Rt=a(Ot),Ut=s(Rt),ut=s(Ut,!0);t(Ut);var ft=a(Ut),ua=s(ft);t(ft);var mt=a(ft,3),fa=s(mt);fa.__click=async()=>{await A("zip")},t(mt),t(Rt),t(S),t(_);var Ze=a(_,2),It=s(Ze);pa(It);var Xt=a(It,2);Xt.__click=U,t(Ze),ia(Ze,k=>le=k,()=>le);var sa=a(Ze,2);Dl(sa,{get subD(){return r(f)},get origPartName(){return e.pDef.partName},get pLink(){return e.pLink}}),t(Me),te(()=>{ca(J,r(h)),ie=he(J,1,"svelte-88egy4",null,ie,{colorErr:r(L),colorWarn:r(j)}),he(re,1,Pa({theFace:r(i)===o}),"svelte-88egy4"),w(Ae,`px_${e.pDef.partName??""}.json`),w(at,`${e.pDef.partName??""}_all.log`),w(Kt,3+r(m).length),w(Gt,`${e.pDef.partName??""}_all.svg`),w(Dt,4+2*r(m).length),w(Ht,`${e.pDef.partName??""}_all.dxf`),w(wt,5+2*r(m).length),w(ea,`${e.pDef.partName??""}_all.pax.json`),w(de,6+2*r(m).length),w(it,`${e.pDef.partName??""}_all_noarc_openscad.scad`),w(ta,7+2*r(m).length),w(Y,`${e.pDef.partName??""}_all_noarc_jscad.js`),w(Pt,8+2*r(m).length),w(Mt,`${e.pDef.partName??""}_all_freecad.py`),w(ut,9+2*r(m).length),w(ua,`${e.pDef.partName??""}_all.zip`),ca(It,r(oe))}),C(l,q),pe()}Fe(["click"]);var jl=T('<h1 class="svelte-3ksd5n"> </h1> <article class="svelte-3ksd5n"> </article> <!> <!>',1);function Al(l,e){be(e,!0),Ps(e.pageDef);var o=jl(),n=Le(o),v=s(n,!0);t(n);var c=a(n,2),d=s(c);t(c);var i=a(c,2);Rs(i,{get pDef(){return e.pageDef.pDef}});var u=a(i,2);Nl(u,{get pDef(){return e.pageDef.pDef},get fgeom(){return e.pageDef.pGeom},get pLink(){return e.pLink}}),te(()=>{w(v,e.pageDef.pTitle),w(d,`[${e.pageDef.pDef.partName??""}]: ${e.pageDef.pDescription??""}`)}),C(l,o),pe()}function Yl(l,e){be(e,!0),Al(l,{get pageDef(){return e.data.pageDef},get pLink(){return e.data.allLink}}),pe()}export{Yl as component,Wl as universal};
